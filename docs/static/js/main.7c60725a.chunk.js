(window["webpackJsonp@workgrid/microapp-edge-trials"]=window["webpackJsonp@workgrid/microapp-edge-trials"]||[]).push([[0],{235:function(e,t,a){},245:function(e,t,a){e.exports=a(550)},442:function(e,t,a){},447:function(e,t){},449:function(e,t){},488:function(e,t){},489:function(e,t){},545:function(e,t,a){},550:function(e,t,a){"use strict";a.r(t);a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(93),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(289),a(290),a(291),a(292),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(308),a(309),a(310),a(311),a(312),a(313),a(315),a(317),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(338),a(340),a(341),a(344),a(345),a(346),a(348),a(349),a(350),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(181),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(431),a(432),a(433),a(434),a(437),a(190);var n=a(1),c=a.n(n),r=a(237),i=a.n(r),o=(a(442),a(241)),l=a(49),s=a(150),u=a.n(s),m=a(238),p=a(239),f=a(42),d=a(66),b=a.n(d),g=a(240);a(545);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O=function(){var e=Object(n.useState)([{name:"Token",result:!1}]),t=Object(f.a)(e,2),a=t[0],r=t[1],i=Object(n.useRef)(new b.a({id:"edge-microapp",audience:"edge-microapp"}));Object(n.useEffect)(function(){console.log("Initialized"),i.current.initialize(),s(),console.log("Done initializing")},[]);var o=function(e){console.log("Showing detail"),i.current.showDetail({url:"".concat(window.location.origin).concat(window.location.pathname,"#/").concat(e),title:"Edge Microapp"})},l=function(e,t){r(function(a){return a.map(function(a){return a.name===e?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{},t):a})})},s=function(){l("Token",{result:!1}),setTimeout(Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.current.getToken();case 2:t=e.sent,"edge-microapp"===(a=Object(g.decode)(t)).aud?l("Token",{result:!0}):console.warn("Invalid token: ".concat(a.aud," !== ").concat("edge-microapp"));case 5:case"end":return e.stop()}},e)})),1e3)};return c.a.createElement("div",null,c.a.createElement("h1",null,"Edge Microapp"),c.a.createElement("p",null,'This is the "edgy" microapp.'),c.a.createElement("section",{className:"section"},c.a.createElement("input",{type:"text",placeholder:"Input Test"}),c.a.createElement("strong",null,"Tests:"),a.map(function(e){return c.a.createElement("div",{className:"checklist"},e.result?c.a.createElement("span",{"aria-label":"pass",role:"img",className:"pass"},"\u2705"):c.a.createElement("span",{"aria-label":"fail",role:"img",className:"pass"},"\u274c"),c.a.createElement("div",{className:"item"},e.name),c.a.createElement("div",{className:"item"},c.a.createElement("button",{className:"action-small",onClick:s},"Retry")))})),c.a.createElement("div",{className:"action-block vertical"},c.a.createElement("button",{className:"secondary",onClick:function(){return o("iframe")}},"Inner iFrame"),c.a.createElement("button",{className:"primary",onClick:function(){return o("featurepolicy")}},"Feature Policy")))},v=(a(235),function(){var e=Object(n.useRef)(new b.a({id:"edge-microapp",audience:"edge-microapp"})),t=Object(n.useState)(5),a=Object(f.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)(""),l=Object(f.a)(o,2),s=l[0],u=l[1],m=Object(n.useRef)();return Object(n.useEffect)(function(){console.log("Initializing Detail"),e.current.initialize(),m.current=setInterval(function(){i(function(e){return console.log(e%2?"Tick":"Tock"),e-1})},1e3)},[]),Object(n.useEffect)(function(){r<=0&&(u("https://www.catapultsgame.com/app/"),clearInterval(m.current))},[r]),c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"IFrame Detail"),c.a.createElement("p",null,'Tests an inner iFrame. This is a typical use case for "wrapping" an existing app in a MicroApp.'),c.a.createElement("div",{className:"exampleBlock"},c.a.createElement("p",null,"Showing iFrame in ",r,"s"),c.a.createElement("iframe",{style:{width:"100%",borderWidth:1},title:"Example Iframe",src:s})))}),j=a(244),w=function(){var e=Object(n.useRef)(new b.a({id:"edge-microapp",audience:"edge-microapp"})),t=Object(n.useState)("geolocation"in navigator),a=Object(f.a)(t,1)[0],r=Object(n.useState)(!!navigator.mediaDevices),i=Object(f.a)(r,1)[0],o=Object(n.useState)("Get location data >>"),l=Object(f.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(!1),p=Object(f.a)(m,2),d=p[0],g=p[1];Object(n.useEffect)(function(){e.current.initialize()},[]);return c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Feature Policy Detail"),c.a.createElement("p",null,"This detail attempts to get location data. You must include the featurePolicy in the catalog entry for this app."),c.a.createElement("div",{className:"example-block"},c.a.createElement("p",null,"GeoLocation is available: ",JSON.stringify(a)),c.a.createElement("div",{className:"feature-block"},c.a.createElement("pre",null,s),c.a.createElement("div",{tabIndex:"0",className:"feature-icon",onClick:function(){if(a){u("Getting location data");try{navigator.geolocation.getCurrentPosition(function(e){u("lat: ".concat(e.coords.latitude,", lon: ").concat(e.coords.longitude))})}catch(e){u("Error fetching location data")}}else u("Geolocation is not available")}},c.a.createElement("span",{role:"img","aria-label":"position"},"\ud83e\udded"))),c.a.createElement("p",null,"Media is available: ",JSON.stringify(i)),c.a.createElement("div",{className:"feature-block"},c.a.createElement(j.a,{className:"mic-visual",record:d,strokeColor:"black",backgroundColor:"#f9f9f9"}),c.a.createElement("div",{tabIndex:"1",className:"feature-icon",onClick:function(){return g(function(e){return!e})}},c.a.createElement("span",{role:"img","aria-label":"mic"},"\ud83c\udf99\ufe0f")))))},h=function(){return c.a.createElement(o.a,{basename:window.location.pathname},c.a.createElement(l.a,{path:"/",exact:!0,component:O}),c.a.createElement(l.a,{path:"/iframe",component:v}),c.a.createElement(l.a,{path:"/featurepolicy",component:w}))};i.a.render(c.a.createElement(h,null),document.getElementById("root"))}},[[245,1,2]]]);
//# sourceMappingURL=main.7c60725a.chunk.js.map